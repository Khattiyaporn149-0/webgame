<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Room List</title>
  <link rel="stylesheet" href="./styles.css" />
  <style>
    /* ===== BG ===== */
    #bgCanvas { position: fixed; inset: 0; z-index: 0; }
    .bg-video-overlay {
      position: fixed; inset: 0;
      background:
        radial-gradient(60vmax 40vmax at 70% 20%, #6b9cff11, #0000 70%),
        radial-gradient(40vmax 30vmax at 30% 70%, #f6d36511, #0000 70%);
      filter: blur(2px) saturate(140%);
      z-index: 1; pointer-events: none;
    }

    /* ===== Page ===== */
    body {
      font-family: "Segoe UI", sans-serif; color: #e6e6fa;
      display: flex; flex-direction: column; align-items: center; justify-content: flex-start;
      padding-top: 60px; margin: 0; min-height: 100vh; position: relative; z-index: 2;
      background:#0b1324;
    }
    .page-title { font-size: 36px; font-weight: bold; margin-bottom: 20px; text-align: center; text-shadow: 0 2px 10px rgba(0,0,0,0.6); z-index: 2; }

    .lobby-container {
      width: 800px; max-width: 90%;
      background: rgba(27, 38, 59, 0.95);
      border: 2px solid #394867; border-radius: 20px; padding: 30px;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.6);
      display: flex; flex-direction: column; position: relative; z-index: 2;
      gap:16px;
    }

    .back-btn {
      position: absolute; top: 20px; left: 20px;
      background: linear-gradient(135deg, #2fe093, #54f4a8); color: #0b1324; border: none;
      padding: 10px 20px; border-radius: 30px; font-weight: bold; font-size: 16px; cursor: pointer;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3); transition: 0.25s;
    }
    .back-btn:hover { background: linear-gradient(135deg, #25c07d, #3edc90); transform: translateY(-2px); }

    #createRoomBtn {
      align-self: flex-end; margin-bottom: 0; padding: 12px 20px;
      background: #2fe093; border: none; border-radius: 30px; font-weight: bold; font-size: 16px;
      cursor: pointer; color: #0b1324; transition: 0.2s;
    }
    #createRoomBtn:hover { background: #25c07d; }

    /* ===== List ===== */
    #roomListWrapper {
      background: rgba(14, 22, 38, 0.7); border: 1px solid #394867; border-radius: 16px; padding: 16px;
      max-height: 480px; overflow-y: auto;
      position: relative; z-index: 1; /* ‡∏≠‡∏¢‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏ö‡∏±‡∏á‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á */
    }
    #roomList { display: grid; gap: 16px; }

    .room-card { background: rgba(14, 22, 38, 0.85); border: 1px solid #394867; border-radius: 14px; padding: 16px 20px; display: flex; justify-content: space-between; align-items: center; transition: transform 0.2s, box-shadow 0.2s; }
    .room-card:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(0,0,0,0.4); }
    .room-info { display: flex; flex-direction: column; gap: 4px; }
    .room-name { font-size: 20px; font-weight: bold; }
    .room-detail { font-size: 14px; opacity: 0.8; }
    .join-btn { padding: 10px 16px; background: #76f7b1; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; color: #0b1324; transition: 0.2s; }
    .join-btn:hover { background: #54f4a8; }

    .muted{opacity:.8;font-size:13px}
    #info {min-height:18px}

    /* ===== ‡∏õ‡∏∏‡πà‡∏° ‚Äú‡πÄ‡∏Ç‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏£‡∏´‡∏±‡∏™‚Äù ‡∏ï‡∏¥‡∏î‡∏Å‡πâ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á ===== */
    .bottom-btn-row{
      position: sticky; bottom: 0; z-index: 5;
      display:flex; justify-content:flex-start; padding-top:16px;
      margin-top:auto;
      background: rgba(27, 38, 59, 0.95);
      box-shadow: 0 -8px 16px rgba(0,0,0,.2);
    }
    .join-code-btn{ background:#ffda79; color:#0b1324; border:0; border-radius:30px; font-weight:700; cursor:pointer; padding:12px 20px; box-shadow:0 4px 12px rgba(0,0,0,0.3); transition:.2s; }
    .join-code-btn:hover{ background:#fddb5f; transform: translateY(-2px); }

    /* ===== Modal (override global .modal{display:none}) ===== */
    .modal{ position:fixed; inset:0; align-items:center; justify-content:center; background:rgba(0,0,0,.7); z-index:9999; }
    /* ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÇ‡∏ä‡∏ß‡πå‡πÄ‡∏°‡∏∑‡πà‡∏≠ aria-hidden="false" */
    #joinModal.modal[aria-hidden="false"]{ display:flex !important; }
    /* ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏¥‡∏î */
    #joinModal.modal{ display:none !important; }

    .dialog{ background:#1e1e2f; color:#fff; padding:24px; border-radius:16px; width:320px; box-shadow:0 0 20px rgba(0,0,0,.5) }
    .dialog-head{ display:flex; justify-content:space-between; align-items:center; margin-bottom:12px }
    .dialog-body label.row{ display:flex; justify-content:space-between; align-items:center; margin:8px 0 }
    .dialog-body input[type=text]{ width:100%; padding:10px; border-radius:8px; border:1px solid #394867; background:#1a2033; color:#fff; }
    .dialog-body .note{ margin-top:10px; font-size:.85em; color:#ccc }
    .x{ background:none; border:none; color:#fff; font-size:18px; cursor:pointer }
    @keyframes fadeIn{ from{ opacity:0; transform:scale(.96) } to{ opacity:1; transform:scale(1) } }
  </style>
</head>
<body>
  <canvas id="bgCanvas"></canvas>
  <div class="bg-video-overlay"></div>

  <div class="page-title">üìú Room List</div>

  <div class="lobby-container">
    <button class="back-btn" onclick="window.location.href='index.html'">‚¨Ö ‡∏Å‡∏•‡∏±‡∏ö</button>
    <button id="createRoomBtn" onclick="window.location.href='createroom.html'">‚ûï ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡πâ‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà</button>

    <div id="info" class="muted"></div>

    <div id="roomListWrapper">
      <div id="roomList"></div>
      <div id="emptyState" style="opacity:.8; text-align:center; padding:16px; display:none;">
        ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏´‡πâ‡∏≠‡∏á‡πÉ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ ‡∏•‡∏≠‡∏á‡∏Å‡∏î ‚Äú‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡πâ‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‚Äù ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢
      </div>
    </div>

    <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏£‡∏´‡∏±‡∏™ -->
    <div class="bottom-btn-row">
      <button id="joinByCodeBtn" type="button" class="join-code-btn" onclick="window._openJoin()">üîë ‡πÄ‡∏Ç‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏£‡∏´‡∏±‡∏™</button>
    </div>
  </div>

  <!-- Modal: ‡πÄ‡∏Ç‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏£‡∏´‡∏±‡∏™ -->
  <div class="modal" id="joinModal" aria-hidden="true" role="dialog">
    <div class="dialog">
      <div class="dialog-head">
        <h3>‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡πâ‡∏≠‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏£‡∏´‡∏±‡∏™</h3>
        <button class="x" id="joinClose">‚úñ</button>
      </div>
      <div class="dialog-body">
        <label class="row" for="joinCodeInput"><span>Room Code</span></label>
        <input id="joinCodeInput" type="text" maxlength="8" placeholder="‡πÄ‡∏ä‡πà‡∏ô ABCD" style="text-transform:uppercase;">
        <div id="joinErr" class="note" style="color:#ff8787;min-height:18px;margin-top:8px"></div>
        <button id="joinSubmit" class="join-btn" style="width:100%;margin-top:8px" type="button">Join</button>
      </div>
    </div>
  </div>

  <script type="module" src="./roomlist.js"></script>
</body>
</html>
