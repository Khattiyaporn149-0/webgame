<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Create Room</title>
  <link rel="stylesheet" href="./styles.css" />

  <style>
    /* ==== BG / Overlay ‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö roomlist ==== */
    #bgCanvas { position: fixed; inset: 0; z-index: 0; }
    .bg-video-overlay{
      position: fixed; inset: 0; z-index: 1; pointer-events:none;
      background:
        radial-gradient(60vmax 40vmax at 70% 20%, #6b9cff11, #0000 70%),
        radial-gradient(40vmax 30vmax at 30% 70%, #f6d36511, #0000 70%);
      filter: blur(2px) saturate(140%);
    }
    body{
      margin:0; font-family:"Segoe UI",system-ui,sans-serif; color:#e6e6fa;
      background:#0b1324; position:relative; z-index:2;
      padding-top: 80px; /* ‡πÄ‡∏ú‡∏∑‡πà‡∏≠ topbar/‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏°‡∏∏‡∏°‡∏Ç‡∏ß‡∏≤ */
    }

    /* ===== ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏Å: ‡πÇ‡∏ó‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö roomlist (‡∏Å‡∏£‡∏≠‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß) ===== */
    .panel{
      width: 800px; max-width: 90%;
      margin: 0 auto 100px;
      background: rgba(27, 38, 59, 0.95);
      border: 2px solid #394867;
      border-radius: 20px;
      padding: 30px 28px;
      color: #e6e6fa;
      position: relative;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.6);
    }

    /* (‡∏•‡∏ö‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏ã‡πâ‡∏≠‡∏ô‡∏Å‡∏£‡∏≠‡∏ö/‡πÑ‡∏Æ‡πÑ‡∏•‡∏ï‡πå‡∏´‡∏±‡∏ß‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏¥‡πâ‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î) */

    .title{
      font-size: 36px; font-weight: 800; text-align: center;
      letter-spacing: .06em; margin: 6px 0 18px;
      text-shadow: 0 2px 10px rgba(0,0,0,0.6);
    }

    /* ‡∏õ‡∏∏‡πà‡∏° Leave ‡∏°‡∏∏‡∏°‡∏ã‡πâ‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏Å‡∏•‡πà‡∏≠‡∏á ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô roomlist */
    .back-btn{
      position:absolute; top:20px; left:20px; z-index:3;
      background: linear-gradient(135deg, #2fe093, #25c07d);
      color:#0b1324; border:0; border-radius: 999px;
      padding: 10px 16px; font-weight:800; cursor:pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,.3);
      transition: transform .15s;
    }
    .back-btn:hover{ transform: translateY(-2px); }

    /* ‡∏ü‡∏¥‡∏•‡∏î‡πå‡∏≠‡∏¥‡∏ô‡∏û‡∏∏‡∏ï/‡πÄ‡∏ã‡πÄ‡∏•‡πá‡∏Å‡∏ï‡πå ‡πÇ‡∏ó‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö roomlist */
    .field{ margin: 16px 0 18px; }
    .label{
      display:flex; align-items:center; gap:10px; font-weight:800; margin-bottom:8px;
      color:#dbe4ff;
    }
    .input, .select{
      width:100%; padding: 14px 16px; border-radius: 12px;
      background: rgba(14,22,38,0.85); color:#e6e6fa;
      border: 1px solid #394867; outline:none;
      transition: border-color .15s, background .15s, box-shadow .15s;
    }
    .input::placeholder{ color:#9aa6c1; }
    .input:focus, .select:focus{
      border-color:#4aa8ff;
      background:#1b2740;
      box-shadow: 0 0 0 3px rgba(74,168,255,.12);
    }

    /* ‡∏õ‡∏∏‡πà‡∏° CREATE ROOM ‡πÇ‡∏ó‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö roomlist */
    .row-actions{ margin-top: 22px; }
    .btn-primary{
      width:100%;
      padding: 12px 20px;
      border:0; border-radius: 12px; cursor:pointer; font-weight:900; font-size:16px;
      background: #2fe093; color:#0b1324;
      box-shadow: 0 8px 24px rgba(47,224,147,.35);
      transition: transform .06s ease, filter .2s ease;
      text-transform: uppercase; letter-spacing: .04em;
    }
    .btn-primary:hover{ transform: translateY(-2px); }

    /* ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô Settings ‡∏°‡∏∏‡∏°‡∏Ç‡∏ß‡∏≤‡∏ö‡∏ô‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤ (‡∏¢‡∏Å‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏£‡∏ß‡∏°) */
    .top-icons{ position: fixed; top: 16px; right: 16px; z-index: 10; display:flex; gap:12px; }
    .icon-btn{
      background: rgba(255,255,255,.1); border: none; color:#fff; cursor:pointer;
      width: 42px; height: 42px; border-radius: 999px;
      display:flex; align-items:center; justify-content:center;
      box-shadow: 0 6px 16px rgba(0,0,0,.35);
      transition: background .15s, transform .12s;
    }
    .icon-btn:hover{ background: rgba(255,255,255,.22); transform: translateY(-1px); }
    .icon-btn svg{ width:22px; height:22px; fill:#fff; }

    /* Modal settings ‡πÉ‡∏ä‡πâ styles.css + ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠ aria-hidden=false */
    #settingsModal[aria-hidden="false"]{ display:flex !important; }
  </style>
</head>
<body>
  <!-- BG -->
  <canvas id="bgCanvas"></canvas>
  <div class="bg-video-overlay"></div>

  <!-- ‡∏õ‡∏∏‡πà‡∏° Settings ‡∏°‡∏∏‡∏°‡∏Ç‡∏ß‡∏≤‡∏ö‡∏ô -->
  <div class="top-icons">
    <button class="icon-btn" id="btnSettingsTop" title="Settings" aria-label="Settings" type="button">
      <svg viewBox="0 0 24 24"><path d="M12 8a4 4 0 1 1-4 4 4 4 0 0 1 4-4Zm9 4a7.43 7.43 0 0 0-.09-1l2.09-1.64-2-3.46-2.49.63a7.51 7.51 0 0 0-1.73-1L14.5 2h-5l-.28 2.53a7.51 7.51 0 0 0-1.73 1l-2.49-.63-2 3.46L4.09 11a7.43 7.43 0 0 0 0 2l-2.09 1.64 2 3.46 2.49-.63a7.51 7.51 0 0 0 1.73-1L9.5 22h5l.28-2.53a7.51 7.51 0 0 0 1.73-1l2.49.63 2-3.46L20.91 13a7.43 7.43 0 0 0 .09-1Z"/></svg>
    </button>
  </div>

  <!-- ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏´‡∏•‡∏±‡∏Å -->
  <main class="panel">
    <button class="back-btn" id="btnBack" type="button">‚¨Ö Leave</button>
    <h1 class="title">CREATE ROOM</h1>

    <!-- Row: Room Name -->
    <div class="field">
      <div class="label"><span class="emoji">üëë</span> <span>Room Name</span></div>
      <input id="roomName" class="input" placeholder="‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏´‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‚Ä¶" />
      <div id="nameError" style="color:#ff6b6b; font-size:14px; min-height:18px; margin-top:6px;"></div>
    </div>

    <!-- Row: Max Players -->
    <div class="field">
      <div class="label"><span class="emoji">üë•</span> <span>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î</span></div>
      <select id="maxPlayers" class="select">
        <option value="4">4</option>
        <option value="6">6</option>
        <option value="8" selected>8</option>
        <option value="10">10</option>
      </select>
    </div>

    <!-- Row: Room Type -->
    <div class="field">
      <div class="label"><span class="emoji">üîí</span> <span>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏´‡πâ‡∏≠‡∏á</span></div>
      <select id="roomType" class="select">
        <option value="public">Public (‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡πÑ‡∏î‡πâ)</option>
        <option value="private">Private (‡∏ã‡πà‡∏≠‡∏ô‡∏à‡∏≤‡∏Å‡∏•‡∏¥‡∏™‡∏ï‡πå)</option>
      </select>
    </div>

    <!-- Button -->
    <div class="row-actions">
      <button class="btn-primary" id="btnCreate" type="button">üöÄ CREATE ROOM</button>
    </div>
  </main>

  <!-- SETTINGS MODAL (‡πÉ‡∏ä‡πâ‡∏Ç‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°) -->
  <div class="modal" id="settingsModal" aria-hidden="true" role="dialog">
    <div class="dialog">
      <div class="dialog-head">
        <h3>Settings</h3>
        <button class="x" id="closeSettings" type="button">‚úñ</button>
      </div>
      <div class="dialog-body">
        <label class="row"><span>Master Volume</span><input id="rangeMaster" type="range" min="0" max="1" step="0.01"></label>
        <label class="row"><span>Music</span><input id="rangeMusic" type="range" min="0" max="1" step="0.01"></label>
        <label class="row"><span>SFX</span><input id="rangeSfx" type="range" min="0" max="1" step="0.01"></label>
        <label class="row">
          <span>Region</span>
          <select id="regionSel">
            <option value="asia">Asia</option>
            <option value="na">North America</option>
            <option value="eu">Europe</option>
          </select>
        </label>
        <div class="note">* ‡∏Ñ‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ö‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå (localStorage)</div>
      </div>
    </div>
  </div>

  <!-- ‡πÇ‡∏´‡∏•‡∏î‡∏ï‡∏±‡∏ß‡∏Å‡∏•‡∏≤‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á/‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ + ‡πÇ‡∏Ñ‡πâ‡∏î‡∏´‡∏ô‡πâ‡∏≤ -->
  <script src="./common-settings.js" defer></script>
  <script type="module" src="./createroom.js"></script>

  <!-- Wiring ‡∏õ‡∏∏‡πà‡∏° Settings + ‡∏Ñ‡∏•‡∏¥‡∏Å SFX -->
  <script>
    (function(){
      const modal = document.getElementById('settingsModal');
      const openBtn = document.getElementById('btnSettingsTop');
      const closeBtn= document.getElementById('closeSettings');

      const open  = ()=> modal?.setAttribute('aria-hidden','false');
      const close = ()=> modal?.setAttribute('aria-hidden','true');

      openBtn?.addEventListener('click', open);
      closeBtn?.addEventListener('click', close);
      modal?.addEventListener('click', e=>{ if(e.target===modal) close(); });
      document.addEventListener('keydown', e=>{ if(e.key==='Escape') close(); });

      // bind sliders/select ‡∏Å‡∏±‡∏ö GameSettings (‡∏°‡∏µ‡πÉ‡∏ô common-settings.js)
      window.addEventListener('DOMContentLoaded', ()=>{
        window.GameSettings?.bindUI({
          rangeMaster:'rangeMaster',
          rangeMusic :'rangeMusic',
          rangeSfx   :'rangeSfx',
          regionSel  :'regionSel'
        });
        // SFX click handled globally in common-settings.js (pointerdown capture)
      });
    })();
  </script>
</body>
</html>
